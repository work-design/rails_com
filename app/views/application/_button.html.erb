<nav data-controller="switch" class="level mb-2 box is-narrow">
  <div class="level-left">
    <%= render 'button_actions' %>
    <%= render 'filter_form' %>
    <% current_filters.each do |filter| %>
      <span class="tag"><%= link_to filter.name, { filter_id: filter.id, **filter.filter_hash } %></span>
    <% end %>
  </div>
  <div class="level-right">
    <button data-action="switch#toggle" data-id="filter_form" class="button">
      <span class="icon is-small"><i class="fa-solid fa-search"></i></span>
    </button>
    <% if filter = current_filters.find(&->(i){ i.id.to_s == params[:filter_id] }) %>
      <%= render partial: 'filter_update', locals: { filter: filter } %>
    <% else %>
      <%= render 'filter_create' %>
    <% end %>
    <%= render 'filter_dropdown' %>
    <%= render 'filter_per' %>
  </div>
</nav>
